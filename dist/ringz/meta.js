"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const getMeta=function(_a){return __awaiter(this,arguments,void 0,function*({link:data}){var _b,_c;try{const dataJson=JSON.parse(data),title=(null==dataJson?void 0:dataJson.kn)||(null==dataJson?void 0:dataJson.mn),image=(null==dataJson?void 0:dataJson.IH)||(null==dataJson?void 0:dataJson.IV),tags=null==dataJson?void 0:dataJson.gn.split(",").slice(0,3).map(tag=>tag.trim()),type="webSeries"===(null==dataJson?void 0:dataJson.cg)?"series":"movie",linkList=[];if("webSeries"===(null==dataJson?void 0:dataJson.cg))null===(_b=["1","2","3","4"])||void 0===_b||_b.forEach(item=>{var _a;const directLinks=[];"object"==typeof(null==dataJson?void 0:dataJson["eServer"+item])&&(null===(_a=null==Object?void 0:Object.keys(null==dataJson?void 0:dataJson["eServer"+item]))||void 0===_a?void 0:_a.length)>0&&(Object.keys(null==dataJson?void 0:dataJson["eServer"+item]).forEach(key=>{directLinks.push({title:"Episode "+key,link:JSON.stringify({url:null==dataJson?void 0:dataJson["eServer"+item][key],server:"Server "+item})})}),linkList.push({title:(null==dataJson?void 0:dataJson.pn)+" (Server "+item+")",directLinks:directLinks}))});else{const directLinks=[];null===(_c=["1","2","3","4"])||void 0===_c||_c.forEach(item=>{(null==dataJson?void 0:dataJson["s"+item])&&directLinks.push({title:"Server "+item+" (HD)",link:JSON.stringify({url:null==dataJson?void 0:dataJson.s1,server:"Server "+item})}),(null==dataJson?void 0:dataJson["4s"+item])&&directLinks.push({title:"Server "+item+" (480p)",link:JSON.stringify({url:null==dataJson?void 0:dataJson["4s"+item],server:"Server "+item})})}),linkList.push({title:null==dataJson?void 0:dataJson.pn,directLinks:directLinks})}return{title:title,image:image,imdbId:"",synopsis:"",type:type,linkList:linkList,tags:tags}}catch(err){return{title:"",image:"",imdbId:"",synopsis:"",type:"movie",linkList:[],tags:[]}}})};exports.getMeta=getMeta;